<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metodos privados y protegidos</title>
</head>
<body>
    <script>
        {
            /*
            'use strict'
            alert('Metodos protegidos')
            // Uso con propiedades publicas
            class CoffeMachine{
                waterAmount = 0
                constructor(power){
                    this.power = power
                    alert(`Created a coffe-machine, power: ${power}`)
                }
            }
            let coffeMachine = new CoffeMachine(100)
            coffeMachine.waterAmount = 200
            */
        }
        {
            // Uso con propiedades protegidas (es una simulacion de el uso de protected)
            // No estan implementados en JS
            /*
            class CoffeeMachine{
                _waterAmount = 0
                set waterAmount(value){
                    if (value < 0) throw new Error('Negative water')
                    this._waterAmount = value
                }
                get waterAmount(){return this._waterAmount}
                constructor(power){
                    this._power = power
                }
            }
            let coffeMachine = new CoffeeMachine(100)
            coffeMachine.waterAmount = -10 // Error: Negative water
            //alert(coffeMachine._waterAmount)
            */
        }
        
    </script>
    <script>
        { /*
            'use strict'
            alert('Uso de las funciones get/set')

            class CoffeeMachine{
                _waterAmount = 0
                setWaterAmount(value){
                    if (value < 0) throw new Error('Negative water')
                    this._waterAmount = value
                }
                getWaterAmount(){return this._waterAmount}
            }
            new CoffeeMachine().setWaterAmount(100)
            alert(new CoffeeMachine().getWaterAmount())
          */
        }
        {  /*
             'use strict'
            alert('Solo lectura')

            class CoffeeMachine{
                constructor(power){
                    this._power = power
                }
                get power(){return this._power}
            }

            let coffeeMachine = new CoffeeMachine(100)
            alert(`Power is ${coffeeMachine.power} W`)
            coffeeMachine.power = 25 // Error 
          */
        }
    </script>
    <script>
        {   /*
            'use strict'
            alert('Metodos Privados')
            // Las propiedades privadas comienzan con #variable

            class CoffeeMachine {
                #waterLimit = 200
                
                #checkWater(value){
                    if (value < 0) throw new Error('Negative water')
                    if (value > this.#waterLimit) throw new Error('Too much water')
            
                }
            

            }
            let coffeeMachine = new CoffeeMachine()
            coffeeMachine.#checkWater() // Error
            coffeeMachine.#waterLimit = 100 // Error
            */
        }
        {  /*
            'use strict'
            alert('Uso de public y private')
            class CoffeeMachine{
                #waterLimit = 200

                get waterLimit(){return this.#waterLimit}
                set waterLimit(value){
                    if (value < 0) throw new Error('Negative water')
                    this.#waterLimit = value
                }
            }
            let machine = new CoffeeMachine()
            machine.waterLimit = 100
            alert(machine.waterLimit)
            //alert(machine.#waterLimit) // Error
            */
        }
    </script>
    <script>
        /*
        'use strict'
        alert('Campos privados no son accesibles usando this[name]')
        class User{
            sayHi(){
                let fielname = 'name'
                alert(`Hello, ${this[fielname]}`)
            }
        }
        let user = new User()
        alert(user.sayHi())
        */
        
        //En OOP delimitar la interface interna de la externa se conoce como encapsulacion
       
        {   /*
            'use strict'
            alert('Ejemplo de uso extension de clase con Array o Map')
            class PowerArray extends Array{
                isEmpty(){return this.length === 0}

            }
            let arr = new PowerArray(1,2,3,10,50)
            alert(arr.isEmpty()) // false
            let filteredArr = arr.filter(item => item >= 10)
            alert(filteredArr.isEmpty())  // false
            */
        }
        {   'use strict'
            alert('Devolviendo metodos map o filter como arrays regulares')
            class PowerArray extends Array{
                isEmpty(){return this.length === 0}
                static get [Symbol.species](){return Array}

            }

            let arr = new PowerArray(1,2,5,40,25)
            alert(arr.isEmpty()) // false
            // filter crea un nuevo array arr.constructor[Symbol.species] como constructor
            let filteredArr = arr.filter(item => item >= 10)
            alert(filteredArr)
            alert(filteredArr.isEmpty()) //Error filteredArr.isEmpty is not a function
        }


        
    </script>
    
</body>
</html>