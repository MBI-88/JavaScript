<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objetos URL</title>
</head>
<body>
    <!--
        Tecnicamente no debemos usar el objeto URL, con string es suficiente. Pero a veces puede ser ralmente util

        Sintaxis: new URL(url,[base])
        -> url: la url o direccion (string)
        -> base: una opcion base, si es establesida y url tiene solo una direccion, entonces URL es generado relativo
        a la base.
    -->
    <script>
        /*
        'use strict'
        // Ejemplo
        
        let url1 = new URL('https://javascript.info/profile/admin')
        let url2 = new URL('/profile/admin','https://javascript.info')

        let url3 = new URL('https://javascript.info/profile/admin')
        let tester = new URL('tester',url3)

        alert(url1)
        alert(url2)
        alert(tester)
        */
    </script>
    <!--
        Buesqueda de parametros  "?"

        Para buscar un parametro en la url se procede: https://google.com/search?query=JavaScript

        URLSearchParams metodos:
        -> append(name,value) adiciona parametros
        -> delete(name) remueve un parametro
        -> get(name): obtiene el parametro
        -> getAll(name): obtiene todos los parametros del mismo nombre, esto es posible a ?user=John&user=Peter
        -> has(name): chequea la intancia del parametro
        -> set(name,value): establece y remplaza el parametro
        -> sort(): ordena parametros por nombre

    -->
    <script>
        /*
        'use strict'
        let url = new URL('https://google.com/search')
        url.searchParams.set('q','test me!')
        alert(url)

        url.searchParams.set('tbs','qdr:y')
        alert(url)
        for (let [name,value] of url.searchParams){
            alert(`${name}=${value}`)
        }
        */
    </script>
    <!-- Encoding -->
    <script>
        /*
        'use strict'
        let url = new URL('https://ru.wikipedia.org/wiki/Tect')
        url.searchParams.set('key','ъ')
        alert(url)
        */
    </script>
    <!--
        Encodign strings

        Si se usa strings en lugar de URL object entonces hay que codificarlo
        mananualmente usando:
        -> encodeURI: codifica la url como un todo
        -> dencodeURI: lo retorna decodificado
        -> encodeURIComponent: codifica los componentes de la URL, tales como parametros de
        busqueda, hash o nombres de direcciones
        -> decodeURIComponent: lo retorna decodificado

        Existen caracteres en las URL tales como: :,?,&,#. Otros como letras en latin y espacions deben
        ser codificados.
    -->
    <script>
        /*
        'use strict'
        // Ejemplo de uso de encodeURI

        let url = encodeURI('http://site.com/привет')
        alert(url)
        */
    </script>
    <script>
        /*
        'use strict'
        //Ejemplo de uso de encodeURIComponent
        let music = encodeURIComponent('Rock&Roll')
        let url  = `https://google.com/search?q=${music}`
        alert(url)
        // Codifia los mismos caracteres que encodeURI mas otros
        // se deberia usar siempre encodeURIComponent a menos que se sepa que son caracteres permitidos
        */
    </script>
    <!--
        Es recomendado usar en los codigos modernos la clase URL y URLSearchParams, una de las razones es
        que son basados en la reciente especificacion RFC3986 mientras que las funciones encode* son basadas
        en la especificacion RFC2396
    -->
    <script>
        'use strict'
        let url = 'http://[2607:f8b0:4005:802::1007]/'
        alert(encodeURI(url))
        alert(new URL(url))

    </script>
    
</body>
</html>