<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Micro tareas y Macro tareas</title>
</head>
<body>
    <!--
        Evnet Loop

        Es importante en el rendimientto de la pagina. Se suele usar fragmentar la tarea en caso de que
        esta sea muy pesada
    -->
    <div>

        <div id="progress"></div>
        <script>
            /*
            'use strict'
            let i = 0
            function count(){
                do {
                    i++
                    progress.innerHTML = i

                }while (i % 1e3 != 0)

                if (i < 1e7){setTimeout(count)}
            }
            count()
            */
        </script>

    </div>
    <!--
        Microtasks

        Despeues de cada macrotask el motor js ejecuta todas las microtask de la cola priorizandolas 
        antes de cualquier otra tarea.

        Existe una funcion especial queueMicrotask(func) que encola la funcion para su ejecucion en la cola

    -->
    <div>
        <div id="progressbar"></div>
        <script>
            'use strict'
            let i = 0
            function count(){
                do {
                    i++
                    progressbar.innerHTML = i
                }
                while (i % 1e3 != 0)
                if (i < 1e6) queueMicrotask(count)
            }
            count()
        </script>
    </div>
    
</body>
</html>